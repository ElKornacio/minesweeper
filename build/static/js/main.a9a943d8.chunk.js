(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(17),s=n.n(i),o=n(5),c=n.n(o),l=n(4),u=n(3),f=n.n(u),d=n(2),m=n(6);var h,b=n(12),v=n(13),j=n(14),p=n(15),g=new(h=function(){function e(t){var n;Object(b.a)(this,e),this.worker=void 0,this._isInitialized=!1,this.initPromise=void 0,this.initPromiseResolve=void 0,this.sliceResolve={},this.initPromise=new Promise((function(e){n=e})),this.initPromiseResolve=n,this.worker=t,this.worker.onmessage=this.handleMessage}return Object(v.a)(e,[{key:"handleMessage",value:function(e){var t=e.data,n=t.type,a=t.id,r=t.data;"inited"===n?(this._isInitialized=!0,this.initPromiseResolve()):"slice"===n&&(this.sliceResolve[a](r),delete this.sliceResolve[a])}},{key:"isInitialized",get:function(){return this._isInitialized}},{key:"processSlice",value:function(e,t,n){var a=this;return new Promise((function(r){var i=String(1e7*Math.random());a.sliceResolve[i]=r,a.worker.postMessage({id:i,type:"slice",data:{fieldBuffer:e,params:t,colorsBuffer:n}})}))}}]),e}(),Object(j.a)(h.prototype,"handleMessage",[p.a],Object.getOwnPropertyDescriptor(h.prototype,"handleMessage"),h.prototype),h)(new function(){return new Worker(n.p+"static/js/index.worker.a6eb539c.js")});function O(e,t){return w.apply(this,arguments)}function w(){return(w=Object(m.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new SharedArrayBuffer(4*t.byteLength),e.abrupt("return",g.processSlice(t,n,a).then((function(e){return{colors:new Uint32Array(a),colorsIndexes:e.colorsIndexes}})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x,y=n(8),S=n(18);function k(){return new Worker(n.p+"static/js/index.worker.29a025dd.js")}var M=(x=function(){function e(t){var n;Object(b.a)(this,e),this.worker=void 0,this._isInitialized=!1,this.initPromise=void 0,this.initPromiseResolve=void 0,this.generateResolve={},this.initPromise=new Promise((function(e){n=e})),this.initPromiseResolve=n,this.worker=t,this.worker.onmessage=this.handleMessage}return Object(v.a)(e,[{key:"handleMessage",value:function(e){var t=e.data,n=t.type,a=t.id,r=t.data;"inited"===n?(this._isInitialized=!0,this.initPromiseResolve()):"generate"===n&&(this.generateResolve[a](r),delete this.generateResolve[a])}},{key:"isInitialized",get:function(){return this._isInitialized}},{key:"generateSlice",value:function(e,t,n,a,r,i){var s=this;return new Promise((function(o){var c=String(1e7*Math.random());s.generateResolve[c]=o,s.worker.postMessage({id:c,type:"generate",data:{buffer:e,offset:t,size:n,mines:a,minesIndexes:r,emptiesIndexes:i}})}))}}]),e}(),Object(j.a)(x.prototype,"handleMessage",[p.a],Object.getOwnPropertyDescriptor(x.prototype,"handleMessage"),x.prototype),x);function C(e,t){var n,a=e.map((function(e){return e.length})).reduce((function(e,t){return e+t}),0),r=new Uint32Array(a+t),i=0,s=Object(y.a)(e);try{for(s.s();!(n=s.n()).done;){var o=n.value;r.set(o,i),i+=o.length}}catch(c){s.e(c)}finally{s.f()}return r}function N(e,t){if(t>e)throw new Error("Cant generate more unique indexes than array length");for(var n=[],a=0;a<t;a++){for(var r=void 0;n.includes(r=Math.floor(Math.random()*e)););n.push(r)}return n}var I=1e7,z=Object(S.a)(new Array(10)).map((function(e){return new M(new k)})),P=Promise.all(z.map((function(e){return e.initPromise})));function E(e,t,n){var a=e.mines,r=e.columns*e.rows,i=Math.max(100,Math.floor(a/3)),s=C(n.map((function(e){return e.minesIndexes})),i),o=Math.max(100,Math.floor(a/3)),c=C(n.map((function(e){return e.emptiesIndexes})),o),l=s.length-i,u=c.length-o,f=n.map((function(e){return e.minesCount})).reduce((function(e,t){return e+t}),0),d=r-f;if(f>a){var m,h=N(l,f-a),b=Object(y.a)(h);try{for(b.s();!(m=b.n()).done;){var v=m.value;t[s[v]]=0,c[u++]=s[v],s[v]=999999999,f--,d++}}catch(S){b.e(S)}finally{b.f()}}else if(f<a){var j,p=N(u,a-f),g=Object(y.a)(p);try{for(g.s();!(j=g.n()).done;){var O=j.value;t[c[O]]=9,s[l++]=c[O],c[O]=999999999,f++,d--}}catch(S){g.e(S)}finally{g.f()}}var w=null;if(0!==d){for(var x;999999999===(x=c[Math.floor(Math.random()*u)]););w=x}return function(e,t,n,a){for(var r=function(t,n){return t*e.columns+n},i=0;i<a;i++){var s=n[i];if(999999999!==s){var o=Math.floor(s/e.columns),c=s%e.columns,l=o>=1,u=o<e.columns-1,f=c>=1,d=c<e.rows-1;f&&l&&9!==t[r(o-1,c-1)]&&t[r(o-1,c-1)]++,f&&9!==t[r(o-0,c-1)]&&t[r(o-0,c-1)]++,f&&u&&9!==t[r(o+1,c-1)]&&t[r(o+1,c-1)]++,l&&9!==t[r(o-1,c-0)]&&t[r(o-1,c-0)]++,u&&9!==t[r(o+1,c-0)]&&t[r(o+1,c-0)]++,l&&d&&9!==t[r(o-1,c+1)]&&t[r(o-1,c+1)]++,d&&9!==t[r(o-0,c+1)]&&t[r(o-0,c+1)]++,u&&d&&9!==t[r(o+1,c+1)]&&t[r(o+1,c+1)]++}}}(e,t,s,l),{field:t,emptySubstitute:w}}function R(e,t,n,a,r,i,s){return A.apply(this,arguments)}function A(){return(A=Object(m.a)(f.a.mark((function e(t,n,a,r,i,s,o){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z[t].generateSlice(n,a,r,i,s,o));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return U.apply(this,arguments)}function U(){return(U=Object(m.a)(f.a.mark((function e(t){var n,a,r,i,s,o,c,u,d,m,h,b,v,j;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P;case 2:for(console.log("Workers available"),Date.now(),n=t.columns*t.rows,a=Math.floor(n/I),r=[],i=0;i<a;i++)r.push(I);return(s=n%I)>0&&(a+=1,r.push(s)),o=new SharedArrayBuffer(n),c=0,u=r.map((function(e,a){var r=Math.floor(t.mines*(e/n)),i=32*Math.min(e,5*r),s=4*Math.min(e,5*(n-r)),u={minesIndexes:new SharedArrayBuffer(i),emptiesIndexes:new SharedArrayBuffer(s),buffer:o,offset:c,size:e,mines:r};return c+=e,R(a,u.buffer,u.offset,u.size,u.mines,u.minesIndexes,u.emptiesIndexes).then((function(e){return Object(l.a)(Object(l.a)({},e),{},{minesIndexes:new Uint32Array(u.minesIndexes).slice(0,e.minesLength),emptiesIndexes:new Uint32Array(u.emptiesIndexes).slice(0,e.emptiesLength)})}))})),d=new Uint8Array(o),m=Date.now(),console.log("Slices start"),e.next=18,Promise.all(u);case 18:return h=e.sent,console.log("Slices generation: "+(Date.now()-m)+"ms"),b=E(t,d,h),v=b.field,j=b.emptySubstitute,e.abrupt("return",{buffer:o,field:v,emptySubstitute:j});case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return L.apply(this,arguments)}function L(){return(L=Object(m.a)(f.a.mark((function e(t){var n,a,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Math.floor(1e8*Math.random())+"s",e.next=3,F(t);case 3:return n=e.sent,a=n.buffer,r=n.field,i=n.emptySubstitute,e.abrupt("return",{params:t,field:{buffer:a,data:r},emptySubstitute:i,colors:O(a,t)});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){var e,t=Object(a.useState)("1"),n=Object(d.a)(t,2),r=n[0],i=n[1],s=Object(a.useState)({columns:10,rows:10,mines:10}),o=Object(d.a)(s,2),c=o[0],u=o[1],h=Object(a.useState)(0),b=Object(d.a)(h,2),v=b[0],j=b[1],p=Object(a.useState)("none"),g=Object(d.a)(p,2),O=g[0],w=g[1],x=Object(a.useState)(null),y=Object(d.a)(x,2),S=y[0],k=y[1],M=Object(a.useState)(null),C=Object(d.a)(M,2),N=C[0],I=C[1],z=Object(a.useState)(null),P=Object(d.a)(z,2),E=P[0],R=P[1],A=Object(a.useState)(!1),F=Object(d.a)(A,2),U=F[0],L=F[1],B=Object(a.useCallback)(function(){var e=Object(m.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.next=3,D(t);case 3:n=e.sent,L(!1),u(t),j(0),k(n.field.data),R(n.colors),I(n.emptySubstitute),w("none"),i(Math.floor(1e7*Math.random())+"s");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),G=Object(a.useCallback)((function(){j(v+1)}),[v]),W=Object(a.useCallback)((function(){j(v-1)}),[v]);return e=Object(a.useCallback)((function(e){" "===e.key&&(e.preventDefault(),B(Object(l.a)({},c)))}),[c]),Object(a.useEffect)((function(){return document.body.addEventListener("keydown",e),function(){return document.body.removeEventListener("keydown",e)}}),[e]),{actions:{newGame:B,addFlag:G,removeFlag:W,setField:k,setGameState:w},state:{gameId:r,params:c,flagsCount:v,gameState:O,field:S,colorizationPromise:E,emptySubstitute:N,loading:U}}}function G(e){return{width:e.clientWidth,height:e.clientHeight}}function W(e,t,n,a){var r=0,i=t,s=[a.params.columns*a.cellSize,n.width],o=[a.params.rows*a.cellSize,n.height],c="x"===e?s:o,l=Object(d.a)(c,2);if(l[0]>l[1]){var u=Math.floor(-t/a.cellSize);r=u<a.overHead?0:u-a.overHead,i=u<a.overHead?t:t+r*a.cellSize}return{start:r,offset:i}}function H(e){var t=e.params,n=e.cellSize,r=e.overHead,i=Object(a.useRef)(null),s=function(e){var t=Object(a.useState)({width:800,height:600}),n=Object(d.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){var t=G(e.current);i(t);var n=function(){var t=G(e.current);i(t)};return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[]),r}(i),o=Object(a.useMemo)((function(){return{width:t.columns*e.cellSize,height:t.rows*e.cellSize}}),[t,e.cellSize]),c=Object(a.useMemo)((function(){return function(e,t){var n=0,a=0;return e.width<t.width&&(n=(t.width-e.width)/2),e.height<t.height&&(a=(t.height-e.height)/2),{initialX:n,initialY:a}}(o,s)}),[o,s]),l=c.initialX,u=c.initialY,f=Object(a.useState)(l),m=Object(d.a)(f,2),h=m[0],b=m[1],v=Object(a.useState)(u),j=Object(d.a)(v,2),p=j[0],g=j[1],O=Math.floor(s.width/n)+2*r,w=Math.floor(s.height/n)+2*r,x=W("x",h,s,e),y=x.start,S=x.offset,k=W("y",p,s,e),M=k.start,C=k.offset;Object(a.useEffect)((function(){b(l),g(u)}),[l,u]);var N=Object(a.useCallback)((function(e){var t=h-e.deltaX,n=p-e.deltaY;o.width<s.width?t=(s.width-o.width)/2:o.width>s.width&&t<-1*(o.width-s.width)?t=-1*(o.width-s.width):t>0&&(t=0),o.height<s.height?n=(s.height-o.height)/2:o.height>s.height&&n<-1*(o.height-s.height)?n=-1*(o.height-s.height):n>0&&(n=0),b(t),g(n)}),[o,s,h,p]);return{ref:i,slice:{offsetX:S,offsetY:C,xStart:y,xEnd:Math.min(t.columns,y+O),yStart:M,yEnd:Math.min(t.rows,M+w)},handleWheel:N}}var _,X=n(7),Y=(_={0:"closed",1:"closed",2:"closed",3:"closed",4:"closed",5:"closed",6:"closed",7:"closed",8:"closed",9:"closed",10:"empty",11:"m1",12:"m2",13:"m3",14:"m4",15:"m5",16:"m6",17:"m7",18:"m8",19:"mine",20:"flag",21:"flag",22:"flag",23:"flag",24:"flag",25:"flag",26:"flag",27:"flag",28:"flag",29:"flag"},Object(X.a)(_,255,"empty"),Object(X.a)(_,254,"closed"),Object(X.a)(_,253,"mine"),Object(X.a)(_,252,"exploded"),Object(X.a)(_,251,"flag"),Object(X.a)(_,250,"flag-wrong"),_);function J(e){var t=e.params,n=e.field,r=e.colorizationPromise,i=e.emptySubstitute,s=e.onFieldUpdate,o=e.onGameStateUpdate,c=e.onAddFlag,l=e.onRemoveFlag,u=Object(a.useState)(!0),h=Object(d.a)(u,2),b=h[0],v=h[1],j=Object(a.useState)(0),p=Object(d.a)(j,2),g=p[0],O=p[1];Object(a.useEffect)((function(){v(!0),O(0)}),[t]);var w=Object(a.useCallback)((function(e,n){return e*t.columns+n}),[t]),x=(Object(a.useCallback)((function(e,n,a){return e<0||n<0||e>=t.columns||n>=t.rows?-1:a[w(e,n)]}),[t]),function(e,t){if(n){var a=new Uint8Array(n);a[w(e,t)]=252;for(var r=0;r<a.length;r++){var i=a[r];i<10?i+=10:i<30&&i>=20&&29!==i&&(i=250),a[r]=i}s(a),o("lose")}}),S=function(e){for(var t=0;t<e.length;t++){var n=e[t];n<10?n+=10:n>=20&&(n-=10),e[t]=n}o("win")},k=function e(n,a,r,i,s){var o=0;if(console.log("colorful ",n,a),0!==r[w(n,a)])return r[w(n,a)]<10&&(r[w(n,a)]+=10,o++),o;var c=i[w(n,a)];if(console.log("field:"),console.log("colors:"),0===c)throw new Error("Very bad thing happened");if(999999999===c)return 0===r[w(n,a)]&&(r[w(n,a)]=10,o++,C(n,a,(function(t,n){o+=e(t,n,r,i,s)}))),o;for(var l=s[c],u=(Date.now(),0);u<l.length;u++){var f=l[u];999999999!==f&&r[f]<10&&(r[f]+=10,o++)}Date.now();for(var d=function(t,n){var a=w(t,n);999999999===i[a]&&0===r[a]?o+=e(t,n,r,i,s):r[a]<10&&(r[a]+=10,o++)},m=0;m<l.length;m++){var h=l[m];999999999!==h&&C(Math.floor(h/t.columns),h%t.columns,d)}return o},M=function(e,n,a){e>=0&&n>=0&&e<t.columns&&n<t.rows&&a(e,n)},C=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];M(e-1,t-1,n),M(e,t-1,n),M(e+1,t-1,n),M(e-1,t,n),M(e+1,t,n),M(e-1,t+1,n),M(e,t+1,n),M(e+1,t+1,n),a&&M(e,t,n)};function N(n,a,r,i,s){if(null!==e.emptySubstitute){var o=Math.floor(e.emptySubstitute/t.columns),c=e.emptySubstitute%t.rows,l=w(n,a);r[l]=function(e,t,n){var a=0;return C(e,t,(function(e,t){return a+=n(e,t)}),arguments.length>3&&void 0!==arguments[3]&&arguments[3]),a}(n,a,(function(e,t){return 9===r[w(e,t)]?1:0})),r[e.emptySubstitute]=9,C(o,c,(function(e,t){(e!==o||t!==c)&&r[w(e,t)]<8&&(r[w(e,t)]+=1);var n=i[w(e,t)];if(0!==n){i[w(e,t)]=0;var a=s[n],l=a.indexOf(w(e,t));a[l]=999999999}}),!0),C(n,a,(function(e,t){(e!==n||t!==a)&&9!==r[w(e,t)]&&r[w(e,t)]>0&&(r[w(e,t)]-=1);var s=i[w(e,t)];0===r[w(e,t)]&&0===s&&(i[w(e,t)]=999999999)}),!0)}}return{handleCellClick:Object(a.useCallback)(function(){var e=Object(m.a)(f.a.mark((function e(a,o,u){var d,m,h,j,p,M,C,I,z,P,E,R,A,F;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:if(d=0,console.log("click",o,u),v(!1),m=new Uint8Array(n),h=m[w(o,u)],!a){e.next=50;break}if(!(h>10&&h<19)){e.next=28;break}if(j=0,p=[],(M=function(e,n){if(!(e<0||n<0||e>=t.columns||n>=t.rows)){var a=m[w(e,n)];a>=20&&a<30?j++:a<10&&p.push({x:e,y:n})}})(o-1,u-1),M(o,u-1),M(o+1,u-1),M(o-1,u),M(o+1,u),M(o-1,u+1),M(o,u+1),M(o+1,u+1),j!==h-10){e.next=26;break}return e.next=23,r;case 23:C=e.sent,I=Object(y.a)(p);try{for(I.s();!(z=I.n()).done;)P=z.value,E=P.x,R=P.y,d+=k(E,R,m,C.colors,C.colorsIndexes)}catch(f){I.e(f)}finally{I.f()}case 26:e.next=48;break;case 28:if(!(h>=10)){e.next=32;break}return e.abrupt("return");case 32:if(9!==h){e.next=44;break}if(!b||null===i){e.next=41;break}return e.next=36,r;case 36:A=e.sent,N(o,u,m,A.colors,A.colorsIndexes),d+=k(o,u,m,A.colors,A.colorsIndexes),e.next=42;break;case 41:return e.abrupt("return",x(o,u));case 42:e.next=48;break;case 44:return e.next=46,r;case 46:F=e.sent,d+=k(o,u,m,F.colors,F.colorsIndexes);case 48:e.next=51;break;case 50:h<10?(m[w(o,u)]+=20,c()):h>=20&&h<30&&(m[w(o,u)]-=20,l());case 51:g+d===t.columns*t.rows-t.mines&&S(m),s(m),O(g+d);case 54:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),[g,n,t,r,b,i])}}var T=n(10),q=n(1),K=function(e){return e.preventDefault()};function V(e){var t=e.state,n=e.className,r=e.x,i=e.y,s=e.onCellClick,o=Object(T.a)(e,["state","className","x","y","onCellClick"]),u=Y[t],f=Object(a.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),s(0===e.button,r,i)}),[s,r,i]);return Object(q.jsx)("div",Object(l.a)({"data-state":t,className:c()("cell","cell-".concat(u),n),onContextMenu:K,onMouseUp:f},o))}function Q(e){for(var t=e.params,n=e.field,a=e.smallSlice,r=e.onCellClick,i=[],s=a.xStart;s<a.xEnd;s++)for(var o=a.yStart;o<a.yEnd;o++)i.push(Object(q.jsx)(V,{style:{transform:"translate(".concat(30*(s-a.xStart),"px, ").concat(30*(o-a.yStart),"px)")},x:s,y:o,state:n[s*t.columns+o],onCellClick:r},"".concat(s-a.xStart,":").concat(o-a.yStart)));return Object(q.jsx)(q.Fragment,{children:i})}function Z(e){var t=e.params,n=e.field,a=e.slice,r=e.onCellClick;return Object(q.jsx)("div",{className:"field",style:{width:30*(a.xEnd-a.xStart)+2,height:30*(a.yEnd-a.yStart)+2,transform:"translate(".concat(a.offsetX,"px, ").concat(a.offsetY,"px)")},children:Object(q.jsx)(Q,{params:t,field:n,smallSlice:a,onCellClick:r})})}n(25);function $(e){var t=e.params,n=e.field,a=H({params:t,cellSize:30,overHead:3}),r=a.ref,i=a.slice,s=a.handleWheel,o=J(e).handleCellClick;return Object(q.jsx)("div",{ref:r,className:"field-wrapper",onWheel:s,children:Object(q.jsx)(Z,{onCellClick:o,slice:i,field:n,params:t})})}n(26);function ee(e){var t=e.value,n=(e.className,Object(T.a)(e,["value","className"])),a=t.toString().padStart(3,"0").split("");return Object(q.jsx)("div",Object(l.a)(Object(l.a)({className:"digits-counter"},n),{},{children:a.map((function(e,t){return Object(q.jsx)("div",{className:c()("digit","d"+e)},t)}))}))}var te=r.a.memo(ee);n(27);function ne(e){var t=e.state,n=e.loading,a=Object(T.a)(e,["state","loading"]);return Object(q.jsx)("div",Object(l.a)({className:c()("face-button",{loading:n},"state-"+t)},a))}n(28);var ae=function(e){return!isNaN(Number(e))&&Number(e)>0};function re(e){var t=e.visible,n=e.params,r=e.onNewParams,i=Object(a.useState)(String(n.columns)),s=Object(d.a)(i,2),o=s[0],l=s[1],u=Object(a.useState)(String(n.rows)),f=Object(d.a)(u,2),m=f[0],h=f[1],b=Object(a.useState)(String(n.mines)),v=Object(d.a)(b,2),j=v[0],p=v[1];return Object(a.useEffect)((function(){l(String(n.columns)),h(String(n.rows)),p(String(n.mines))}),[n]),Object(q.jsx)("div",{className:c()("params-modal-backdrop",{visible:t}),children:Object(q.jsxs)("div",{className:"params-modal",children:[Object(q.jsx)("h3",{children:"New game:"}),Object(q.jsxs)("div",{className:"field-row",children:[Object(q.jsx)("label",{children:"Columns:"}),Object(q.jsx)("input",{type:"number",value:o,onChange:function(e){return l(e.target.value)}})]}),Object(q.jsxs)("div",{className:"field-row",children:[Object(q.jsx)("label",{children:"Rows:"}),Object(q.jsx)("input",{type:"number",value:m,onChange:function(e){return h(e.target.value)}})]}),Object(q.jsxs)("div",{className:"field-row",children:[Object(q.jsx)("label",{children:"Mines:"}),Object(q.jsx)("input",{type:"number",value:j,onChange:function(e){return p(e.target.value)}})]}),Object(q.jsx)("div",{className:"field-row",children:Object(q.jsx)("button",{onClick:function(e){if(e.preventDefault(),!ae(o)||!ae(m)||!ae(j))return alert("All numbers must be valid and > 1");var t=Number(o),n=Number(m),a=Number(j);return t<2||n<2||t>1e4||n>1e4?alert("Both columns and rows must be between 2 and 10000"):a>=t*n-1?alert("Amount of mines must be less than field size and one empty cell must exist (m < c * r - 1)"):void r({columns:t,rows:n,mines:a})},children:"OK!"})})]})})}n(29);function ie(e){var t=Object(a.useState)(0),n=Object(d.a)(t,2),r=n[0],i=n[1],s=Object(a.useState)(!1),o=Object(d.a)(s,2),c=o[0],l=o[1];return Object(a.useEffect)((function(){var t=null;return"none"===e.gameState&&(t=setTimeout((function(){return i(r+1)}),1e3)),function(){return t?clearTimeout(t):void 0}}),[r,e.gameState]),Object(a.useEffect)((function(){"none"===e.gameState&&i(0)}),[e.gameId,e.gameState]),Object(q.jsxs)("div",{className:"header",children:[Object(q.jsx)(re,{params:e.params,visible:c,onNewParams:function(t){e.onNewGame(t),l(!1)}}),Object(q.jsx)("div",{className:"time",children:Object(q.jsx)(te,{value:r})}),Object(q.jsx)("div",{className:"restart",children:Object(q.jsx)(ne,{loading:e.loading,state:"none"===e.gameState?"unpressed":e.gameState,onClick:function(){return l(!0)}})}),Object(q.jsx)("div",{className:"mines-left",children:Object(q.jsx)(te,{value:e.minesLeft})})]})}n(30);var se=function(){var e=B(),t=e.actions,n=e.state;return Object(q.jsxs)("div",{className:c()("app",n.gameState,{loading:n.loading}),children:[Object(q.jsx)(ie,{params:n.params,gameId:n.gameId,loading:n.loading,gameState:n.gameState,onNewGame:t.newGame,minesLeft:n.params.mines-n.flagsCount}),n.field&&n.colorizationPromise?Object(q.jsx)($,{params:n.params,emptySubstitute:n.emptySubstitute,onGameStateUpdate:t.setGameState,onAddFlag:t.addFlag,onRemoveFlag:t.removeFlag,field:n.field,colorizationPromise:n.colorizationPromise,onFieldUpdate:t.setField}):Object(q.jsx)("div",{className:"placeholder",children:"Press on a smiling face to start new game."})]})};s.a.render(Object(q.jsx)(r.a.StrictMode,{children:Object(q.jsx)(se,{})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.a9a943d8.chunk.js.map